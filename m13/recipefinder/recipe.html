<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recipe Finder</title>
</head>
<body>
    <h1>Recipe Finder</h1>
    <input type="text" id="searchInput" placeholder="Search recipe...">
    <button id="searchBtn">Search</button>
    <div id="recipes"></div>
    <script>
        const searchBtn = document.getElementById("searchBtn");
        const searchInput = document.getElementById("searchInput");
        const recipesContainer = document.getElementById("recipes");
        async function fetching(query){
            try{
                recipesContainer.innerHTML="<p>Loading...</p>";
                const response=await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${query}`);
                if(!response.ok){
                    throw new Error("Network response was not okey");
                }
                const data=await response.json();
                console.log(data);
                displayRecipes(data.meals);
            }
            catch(error){
                recipesContainer.innerHTML="<p>Error Fetching recipes.</p>";
                console.log(error);
            }
        }
        function displayRecipes(meals) {
            recipesContainer.innerHTML = "";
            if (!meals) {
                recipesContainer.innerHTML = "<p>No recipes found.</p>";
                return;
            }
            meals.forEach(meal => {
                const recipeDiv = document.createElement("div");
                recipeDiv.innerHTML = `
                    <h3>${meal.strMeal}</h3>
                    <img src="${meal.strMealThumb}" width="200">
                    <p><strong>Category:</strong> ${meal.strCategory}</p>
                    <p><strong>Area:</strong> ${meal.strArea}</p>
                    <button onclick="toggleInstructions('${meal.idMeal}')">
                        Show Instructions
                    </button>
                    <p id="inst-${meal.idMeal}" style="display:none;">
                        ${meal.strInstructions}
                    </p>
                    <hr>
                `;
                recipesContainer.appendChild(recipeDiv);
            });
        }
        function toggleInstructions(id) {
            const element = document.getElementById(`inst-${id}`);
            if (element.style.display === "none") {
                element.style.display = "block";
            } else {
                element.style.display = "none";
            }
        }
        searchBtn.addEventListener("click", () => {
            const query = searchInput.value.trim();
            if (query === "") return;
            fetching(query);
        });
        searchInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                searchBtn.click();
            }
        });
    </script>
</body>
</html>
